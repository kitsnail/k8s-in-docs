<svg viewBox="0 0 1300 900" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <!-- Gradients -->
    <linearGradient id="grad-keda" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#fff3e0;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#ffb74d;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="grad-scaler" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#fff9c4;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#fff176;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="grad-hpa" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#e8f5e9;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#81c784;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="grad-redis" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#ffebee;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#ef5350;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="grad-pod" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#e3f2fd;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#64b5f6;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="grad-external" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#f3e5f5;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#ba68c8;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="grad-event" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#e0f2f1;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#4db6ac;stop-opacity:1" />
    </linearGradient>
    
    <!-- Arrow markers -->
    <marker id="arrow" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto" markerUnits="strokeWidth">
      <path d="M0,0 L0,6 L9,3 z" fill="#666"/>
    </marker>
    <marker id="arrow-orange" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto" markerUnits="strokeWidth">
      <path d="M0,0 L0,6 L9,3 z" fill="#ff9800"/>
    </marker>
    <marker id="arrow-red" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto" markerUnits="strokeWidth">
      <path d="M0,0 L0,6 L9,3 z" fill="#f44336"/>
    </marker>
    <marker id="arrow-green" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto" markerUnits="strokeWidth">
      <path d="M0,0 L0,6 L9,3 z" fill="#4caf50"/>
    </marker>
    
    <!-- Filters -->
    <filter id="shadow" x="-20%" y="-20%" width="140%" height="140%">
      <feDropShadow dx="2" dy="2" stdDeviation="3" flood-opacity="0.3"/>
    </filter>
    <filter id="glow">
      <feGaussianBlur stdDeviation="3" result="coloredBlur"/>
      <feMerge>
        <feMergeNode in="coloredBlur"/>
        <feMergeNode in="SourceGraphic"/>
      </feMerge>
    </filter>
    
    <!-- Pattern for queue visualization -->
    <pattern id="queuePattern" x="0" y="0" width="20" height="20" patternUnits="userSpaceOnUse">
      <rect width="20" height="20" fill="#ffebee"/>
      <rect x="2" y="2" width="16" height="16" fill="#ffcdd2" rx="2"/>
    </pattern>
  </defs>
  
  <!-- Background -->
  <rect width="1300" height="900" fill="#fafafa"/>
  
  <!-- Title -->
  <text x="650" y="40" text-anchor="middle" font-family="system-ui, -apple-system, sans-serif" font-size="28" font-weight="bold" fill="#333">
    KEDA äº‹ä»¶é©±åŠ¨è‡ªåŠ¨æ‰©ç¼©å®¹æ¶æ„
  </text>
  <text x="650" y="68" text-anchor="middle" font-family="system-ui, -apple-system, sans-serif" font-size="14" fill="#666">
    ä»¥ AI æ¨ç†æœåŠ¡ä¸ºä¾‹ Â· é¤å…ç‚¹å•å°ç¥¨æœºç±»æ¯”
  </text>
  
  <!-- External Event Sources Box -->
  <rect x="30" y="100" width="280" height="320" rx="10" fill="#fff" stroke="#e91e63" stroke-width="2"/>
  <text x="170" y="125" text-anchor="middle" font-family="system-ui, sans-serif" font-size="15" font-weight="bold" fill="#c2185b">
    ğŸŒ å¤–éƒ¨äº‹ä»¶æº (External Sources)
  </text>
  <text x="170" y="143" text-anchor="middle" font-family="system-ui, sans-serif" font-size="11" fill="#888">
    ç±»æ¯”: é¤å…ç‚¹å•å°ç¥¨æœº
  </text>
  
  <!-- Redis Stream -->
  <g transform="translate(50, 160)" filter="url(#shadow)">
    <rect width="240" height="100" rx="8" fill="url(#grad-redis)" stroke="#c62828" stroke-width="2"/>
    <text x="120" y="25" text-anchor="middle" font-family="system-ui, sans-serif" font-size="14" font-weight="bold" fill="#b71c1c">Redis Stream</text>
    <text x="120" y="45" text-anchor="middle" font-family="system-ui, sans-serif" font-size="11" fill="#d32f2f">æ¨ç†è¯·æ±‚é˜Ÿåˆ—</text>
    
    <!-- Queue visualization -->
    <g transform="translate(20, 58)">
      <rect width="200" height="32" rx="4" fill="#fff" stroke="#ef5350" stroke-width="1"/>
      <!-- Queue items -->
      <g class="queue-items">
        <rect x="5" y="5" width="22" height="22" rx="3" fill="#ffcdd2" stroke="#ef5350" stroke-width="1">
          <animate attributeName="x" values="5;5;5;5" dur="2s" repeatCount="indefinite"/>
        </rect>
        <rect x="30" y="5" width="22" height="22" rx="3" fill="#ffcdd2" stroke="#ef5350" stroke-width="1"/>
        <rect x="55" y="5" width="22" height="22" rx="3" fill="#ffcdd2" stroke="#ef5350" stroke-width="1"/>
        <rect x="80" y="5" width="22" height="22" rx="3" fill="#ffcdd2" stroke="#ef5350" stroke-width="1"/>
        <rect x="105" y="5" width="22" height="22" rx="3" fill="#ffcdd2" stroke="#ef5350" stroke-width="1"/>
        <rect x="130" y="5" width="22" height="22" rx="3" fill="#ffcdd2" stroke="#ef5350" stroke-width="1"/>
        <rect x="155" y="5" width="22" height="22" rx="3" fill="#ffcdd2" stroke="#ef5350" stroke-width="1"/>
        <!-- Overflow indicator -->
        <text x="185" y="20" font-family="system-ui, sans-serif" font-size="12" fill="#c62828" font-weight="bold">...</text>
      </g>
    </g>
    
    <!-- Queue stats -->
    <text x="120" y="95" text-anchor="middle" font-family="monospace, sans-serif" font-size="12" font-weight="bold" fill="#b71c1c">
      ç§¯å‹: <tspan fill="#d32f2f" font-size="14">500</tspan> æ¡æ¶ˆæ¯ âš ï¸
    </text>
  </g>
  
  <!-- Kafka -->
  <g transform="translate(50, 270)" filter="url(#shadow)">
    <rect width="115" height="70" rx="8" fill="url(#grad-event)" stroke="#00796b" stroke-width="2"/>
    <text x="57" y="22" text-anchor="middle" font-family="system-ui, sans-serif" font-size="12" font-weight="bold" fill="#00695c">Kafka</text>
    <text x="57" y="40" text-anchor="middle" font-family="system-ui, sans-serif" font-size="10" fill="#00796b">æ‰¹é‡ä»»åŠ¡é˜Ÿåˆ—</text>
    <text x="57" y="58" text-anchor="middle" font-family="system-ui, sans-serif" font-size="10" fill="#666">ç§¯å‹: 1,500</text>
  </g>
  
  <!-- Prometheus -->
  <g transform="translate(175, 270)" filter="url(#shadow)">
    <rect width="115" height="70" rx="8" fill="#e8eaf6" stroke="#3f51b5" stroke-width="2"/>
    <text x="57" y="22" text-anchor="middle" font-family="system-ui, sans-serif" font-size="12" font-weight="bold" fill="#283593">Prometheus</text>
    <text x="57" y="40" text-anchor="middle" font-family="system-ui, sans-serif" font-size="10" fill="#3f51b5">ä¸šåŠ¡æŒ‡æ ‡</text>
    <text x="57" y="58" text-anchor="middle" font-family="system-ui, sans-serif" font-size="10" fill="#666">P99: 8.5s</text>
  </g>
  
  <!-- KEDA Control Plane Box -->
  <rect x="340" y="100" width="620" height="320" rx="10" fill="#fff8e1" stroke="#ff8f00" stroke-width="2"/>
  <text x="650" y="125" text-anchor="middle" font-family="system-ui, sans-serif" font-size="15" font-weight="bold" fill="#e65100">
    ğŸ¯ KEDA æ§åˆ¶å¹³é¢ (Event-Driven Control Plane)
  </text>
  <text x="650" y="143" text-anchor="middle" font-family="system-ui, sans-serif" font-size="11" fill="#888">
    ç±»æ¯”: é¤å…ç»ç† + ç»Ÿè®¡å‘˜ + ç¿»è¯‘å®˜
  </text>
  
  <!-- ScaledObject -->
  <g transform="translate(360, 160)" filter="url(#shadow)">
    <rect width="160" height="110" rx="8" fill="url(#grad-scaler)" stroke="#f57f17" stroke-width="2"/>
    <text x="80" y="25" text-anchor="middle" font-family="system-ui, sans-serif" font-size="13" font-weight="bold" fill="#e65100">ScaledObject</text>
    <text x="80" y="45" text-anchor="middle" font-family="system-ui, sans-serif" font-size="10" fill="#f57f17">æ‰©ç¼©å®¹è§„åˆ™å®šä¹‰</text>
    
    <!-- Config lines -->
    <g transform="translate(10, 58)">
      <rect width="140" height="42" rx="3" fill="#fff" stroke="#ffcc80" stroke-width="1"/>
      <text x="70" y="15" text-anchor="middle" font-family="monospace, sans-serif" font-size="9" fill="#666">type: redis-streams</text>
      <text x="70" y="28" text-anchor="middle" font-family="monospace, sans-serif" font-size="9" fill="#666">pendingEntriesCount: 10</text>
      <text x="70" y="40" text-anchor="middle" font-family="monospace, sans-serif" font-size="9" fill="#666">min: 0, max: 100</text>
    </g>
  </g>
  
  <!-- KEDA Operator -->
  <g transform="translate(540, 160)" filter="url(#shadow)">
    <rect width="160" height="110" rx="8" fill="url(#grad-keda)" stroke="#ef6c00" stroke-width="2"/>
    <text x="80" y="25" text-anchor="middle" font-family="system-ui, sans-serif" font-size="13" font-weight="bold" fill="#e65100">KEDA Operator</text>
    <text x="80" y="45" text-anchor="middle" font-family="system-ui, sans-serif" font-size="10" fill="#ef6c00">é¤å…ç»ç† / åè°ƒå™¨</text>
    
    <!-- Status indicators -->
    <g transform="translate(15, 60)">
      <circle r="6" fill="#4caf50">
        <animate attributeName="opacity" values="1;0.3;1" dur="1s" repeatCount="indefinite"/>
      </circle>
      <text x="15" y="4" font-family="system-ui, sans-serif" font-size="9" fill="#666">ç›‘å¬ä¸­</text>
    </g>
    <g transform="translate(15, 80)">
      <text x="80" y="85" text-anchor="middle" font-family="system-ui, sans-serif" font-size="9" fill="#666">pollingInterval: 30s</text>
    </g>
  </g>
  
  <!-- Metrics Server -->
  <g transform="translate(720, 160)" filter="url(#shadow)">
    <rect width="220" height="110" rx="8" fill="url(#grad-external)" stroke="#7b1fa2" stroke-width="2"/>
    <text x="110" y="25" text-anchor="middle" font-family="system-ui, sans-serif" font-size="13" font-weight="bold" fill="#4a148c">KEDA Metrics Server</text>
    <text x="110" y="45" text-anchor="middle" font-family="system-ui, sans-serif" font-size="10" fill="#7b1fa2">ç¿»è¯‘å®˜ / æŒ‡æ ‡é€‚é…å™¨</text>
    
    <!-- Metric conversion example -->
    <g transform="translate(10, 58)">
      <rect width="200" height="42" rx="3" fill="#fff" stroke="#ce93d8" stroke-width="1"/>
      <text x="100" y="15" text-anchor="middle" font-family="monospace, sans-serif" font-size="9" fill="#666">Redis: 500æ¡ â†’ External Metric</text>
      <text x="100" y="32" text-anchor="middle" font-family="monospace, sans-serif" font-size="10" fill="#7b1fa2" font-weight="bold">redis_stream_length: 500</text>
    </g>
  </g>
  
  <!-- HPA (Auto-created) -->
  <g transform="translate(480, 290)" filter="url(#shadow)">
    <rect width="160" height="110" rx="8" fill="url(#grad-hpa)" stroke="#388e3c" stroke-width="2"/>
    <text x="80" y="25" text-anchor="middle" font-family="system-ui, sans-serif" font-size="13" font-weight="bold" fill="#2e7d32">HPA (è‡ªåŠ¨åˆ›å»º)</text>
    <text x="80" y="45" text-anchor="middle" font-family="system-ui, sans-serif" font-size="10" fill="#388e3c">äººäº‹éƒ¨ / å†³ç­–æ‰§è¡Œ</text>
    
    <!-- Auto-created badge -->
    <g transform="translate(10, 58)">
      <rect width="140" height="20" rx="3" fill="#c8e6c9"/>
      <text x="70" y="14" text-anchor="middle" font-family="system-ui, sans-serif" font-size="9" fill="#2e7d32">ç”± KEDA è‡ªåŠ¨æ‰˜ç®¡</text>
    </g>
    
    <text x="80" y="90" text-anchor="middle" font-family="system-ui, sans-serif" font-size="9" fill="#666">sync period: 15s</text>
  </g>
  
  <!-- API Server -->
  <g transform="translate(660, 290)" filter="url(#shadow)">
    <rect width="160" height="110" rx="8" fill="#f3e5f5" stroke="#7b1fa2" stroke-width="2"/>
    <text x="80" y="25" text-anchor="middle" font-family="system-ui, sans-serif" font-size="13" font-weight="bold" fill="#4a148c">API Server</text>
    <text x="80" y="45" text-anchor="middle" font-family="system-ui, sans-serif" font-size="10" fill="#7b1fa2">Kubernetes API</text>
    
    <g transform="translate(10, 62)">
      <rect width="140" height="32" rx="3" fill="#fff" stroke="#ce93d8" stroke-width="1"/>
      <text x="70" y="14" text-anchor="middle" font-family="monospace, sans-serif" font-size="9" fill="#666">PATCH Deployment</text>
      <text x="70" y="26" text-anchor="middle" font-family="monospace, sans-serif" font-size="10" fill="#7b1fa2" font-weight="bold">replicas: 3 â†’ 50</text>
    </g>
  </g>
  
  <!-- Kubernetes Native Box -->
  <rect x="980" y="100" width="290" height="320" rx="10" fill="#f5f5f5" stroke="#9e9e9e" stroke-width="2"/>
  <text x="1125" y="125" text-anchor="middle" font-family="system-ui, sans-serif" font-size="15" font-weight="bold" fill="#616161">
    â˜¸ï¸ Kubernetes åŸç”Ÿ
  </text>
  
  <!-- HPA V2 -->
  <g transform="translate(1000, 160)" filter="url(#shadow)">
    <rect width="120" height="80" rx="8" fill="#e8f5e9" stroke="#4caf50" stroke-width="2"/>
    <text x="60" y="25" text-anchor="middle" font-family="system-ui, sans-serif" font-size="12" font-weight="bold" fill="#2e7d32">åŸç”Ÿ HPA</text>
    <text x="60" y="45" text-anchor="middle" font-family="system-ui, sans-serif" font-size="9" fill="#666">CPU/å†…å­˜æŒ‡æ ‡</text>
    <text x="60" y="62" text-anchor="middle" font-family="system-ui, sans-serif" font-size="9" fill="#888">(KEDAå¢å¼ºç‰ˆ)</text>
  </g>
  
  <!-- Deployment -->
  <g transform="translate(1130, 160)" filter="url(#shadow)">
    <rect width="120" height="80" rx="8" fill="#fff3e0" stroke="#ff9800" stroke-width="2"/>
    <text x="60" y="25" text-anchor="middle" font-family="system-ui, sans-serif" font-size="12" font-weight="bold" fill="#e65100">Deployment</text>
    <text x="60" y="45" text-anchor="middle" font-family="system-ui, sans-serif" font-size="9" fill="#666">æ¨ç†æœåŠ¡</text>
    <text x="60" y="62" text-anchor="middle" font-family="system-ui, sans-serif" font-size="9" fill="#888">å·¥ä½œè´Ÿè½½</text>
  </g>
  
  <!-- Connection lines explanation -->
  <g transform="translate(1000, 260)">
    <rect width="250" height="140" rx="8" fill="#fff" stroke="#ddd" stroke-width="1"/>
    <text x="125" y="20" text-anchor="middle" font-family="system-ui, sans-serif" font-size="11" font-weight="bold" fill="#555">è¿æ¥è¯´æ˜</text>
    
    <g transform="translate(10, 35)">
      <line x1="0" y1="6" x2="25" y2="6" stroke="#f44336" stroke-width="2" marker-end="url(#arrow-red)"/>
      <text x="35" y="10" font-family="system-ui, sans-serif" font-size="9" fill="#666">äº‹ä»¶/è¯·æ±‚æµ</text>
    </g>
    
    <g transform="translate(10, 55)">
      <line x1="0" y1="6" x2="25" y2="6" stroke="#ff9800" stroke-width="2" marker-end="url(#arrow-orange)"/>
      <text x="35" y="10" font-family="system-ui, sans-serif" font-size="9" fill="#666">æŒ‡æ ‡æŸ¥è¯¢ (30s)</text>
    </g>
    
    <g transform="translate(10, 75)">
      <line x1="0" y1="6" x2="25" y2="6" stroke="#2196f3" stroke-width="2" marker-end="url(#arrow)"/>
      <text x="35" y="10" font-family="system-ui, sans-serif" font-size="9" fill="#666">External Metrics</text>
    </g>
    
    <g transform="translate(10, 95)">
      <line x1="0" y1="6" x2="25" y2="6" stroke="#4caf50" stroke-width="2" marker-end="url(#arrow-green)"/>
      <text x="35" y="10" font-family="system-ui, sans-serif" font-size="9" fill="#666">æ‰©å®¹æŒ‡ä»¤</text>
    </g>
    
    <g transform="translate(130, 55)">
      <rect width="110" height="70" rx="4" fill="#e3f2fd" stroke="#2196f3" stroke-width="1"/>
      <text x="55" y="18" text-anchor="middle" font-family="system-ui, sans-serif" font-size="9" font-weight="bold" fill="#1976d2">å…³é”®å‚æ•°</text>
      <text x="55" y="35" text-anchor="middle" font-family="system-ui, sans-serif" font-size="8" fill="#666">pollingInterval: 30s</text>
      <text x="55" y="50" text-anchor="middle" font-family="system-ui, sans-serif" font-size="8" fill="#666">cooldownPeriod: 300s</text>
      <text x="55" y="65" text-anchor="middle" font-family="system-ui, sans-serif" font-size="8" fill="#666">sync period: 15s</text>
    </g>
  </g>
  
  <!-- Worker Nodes Box -->
  <rect x="30" y="450" width="1240" height="420" rx="10" fill="#f0f7ff" stroke="#42a5f5" stroke-width="2"/>
  <text x="650" y="480" text-anchor="middle" font-family="system-ui, sans-serif" font-size="16" font-weight="bold" fill="#1565c0">
    ğŸ–¥ï¸ å·¥ä½œèŠ‚ç‚¹ (Worker Nodes) - Pod è¿è¡Œç¯å¢ƒ
  </text>
  
  <!-- Node 1 -->
  <rect x="60" y="500" width="580" height="160" rx="8" fill="#fff" stroke="#64b5f6" stroke-width="2"/>
  <text x="350" y="525" text-anchor="middle" font-family="system-ui, sans-serif" font-size="13" font-weight="bold" fill="#1976d2">ğŸ“¦ Node 1 - Kubelet</text>
  
  <!-- Running Pods -->
  <g transform="translate(80, 545)">
    <text x="0" y="-8" font-family="system-ui, sans-serif" font-size="10" fill="#666">ğŸŸ¢ è¿è¡Œä¸­ (Running)</text>
    
    <g transform="translate(0, 0)">
      <g class="pod">
        <rect width="95" height="70" rx="6" fill="url(#grad-pod)" stroke="#2196f3" stroke-width="2"/>
        <text x="47" y="20" text-anchor="middle" font-family="system-ui, sans-serif" font-size="11" font-weight="bold" fill="#1565c0">Pod 1</text>
        <text x="47" y="38" text-anchor="middle" font-family="system-ui, sans-serif" font-size="9" fill="#1976d2">æ¨ç†æœåŠ¡</text>
        <text x="47" y="55" text-anchor="middle" font-family="system-ui, sans-serif" font-size="10" fill="#4caf50">âœ“ æ¶ˆè´¹ä¸­</text>
      </g>
      
      <g class="pod" transform="translate(110, 0)">
        <rect width="95" height="70" rx="6" fill="url(#grad-pod)" stroke="#2196f3" stroke-width="2"/>
        <text x="47" y="20" text-anchor="middle" font-family="system-ui, sans-serif" font-size="11" font-weight="bold" fill="#1565c0">Pod 2</text>
        <text x="47" y="38" text-anchor="middle" font-family="system-ui, sans-serif" font-size="9" fill="#1976d2">æ¨ç†æœåŠ¡</text>
        <text x="47" y="55" text-anchor="middle" font-family="system-ui, sans-serif" font-size="10" fill="#4caf50">âœ“ æ¶ˆè´¹ä¸­</text>
      </g>
      
      <g class="pod" transform="translate(220, 0)">
        <rect width="95" height="70" rx="6" fill="url(#grad-pod)" stroke="#2196f3" stroke-width="2"/>
        <text x="47" y="20" text-anchor="middle" font-family="system-ui, sans-serif" font-size="11" font-weight="bold" fill="#1565c0">Pod 3</text>
        <text x="47" y="38" text-anchor="middle" font-family="system-ui, sans-serif" font-size="9" fill="#1976d2">æ¨ç†æœåŠ¡</text>
        <text x="47" y="55" text-anchor="middle" font-family="system-ui, sans-serif" font-size="10" fill="#4caf50">âœ“ æ¶ˆè´¹ä¸­</text>
      </g>
    </g>
  </g>
  
  <!-- Scaling Pods (Being created) -->
  <g transform="translate(80, 625)">
    <text x="0" y="-8" font-family="system-ui, sans-serif" font-size="10" fill="#666">â³ æ‰©å®¹ä¸­ (Scaling Up)</text>
    
    <g transform="translate(0, 0)">
      <g class="scaling-pod" opacity="0.7">
        <rect width="95" height="70" rx="6" fill="#e8f5e9" stroke="#4caf50" stroke-width="2" stroke-dasharray="4"/>
        <text x="47" y="20" text-anchor="middle" font-family="system-ui, sans-serif" font-size="11" font-weight="bold" fill="#2e7d32">Pod 4</text>
        <text x="47" y="38" text-anchor="middle" font-family="system-ui, sans-serif" font-size="9" fill="#388e3c">åˆ›å»ºä¸­...</text>
        <text x="47" y="55" text-anchor="middle" font-family="system-ui, sans-serif" font-size="10" fill="#ff9800">â³ å¯åŠ¨ä¸­</text>
        <animate attributeName="opacity" values="0.5;1;0.5" dur="1.5s" repeatCount="indefinite"/>
      </g>
      
      <g class="scaling-pod" transform="translate(110, 0)" opacity="0.7">
        <rect width="95" height="70" rx="6" fill="#e8f5e9" stroke="#4caf50" stroke-width="2" stroke-dasharray="4"/>
        <text x="47" y="20" text-anchor="middle" font-family="system-ui, sans-serif" font-size="11" font-weight="bold" fill="#2e7d32">Pod 5</text>
        <text x="47" y="38" text-anchor="middle" font-family="system-ui, sans-serif" font-size="9" fill="#388e3c">åˆ›å»ºä¸­...</text>
        <text x="47" y="55" text-anchor="middle" font-family="system-ui, sans-serif" font-size="10" fill="#ff9800">â³ å¯åŠ¨ä¸­</text>
        <animate attributeName="opacity" values="0.5;1;0.5" dur="1.5s" begin="0.5s" repeatCount="indefinite"/>
      </g>
    </g>
  </g>
  
  <!-- Node 2 -->
  <rect x="660" y="500" width="580" height="160" rx="8" fill="#fff" stroke="#64b5f6" stroke-width="2"/>
  <text x="950" y="525" text-anchor="middle" font-family="system-ui, sans-serif" font-size="13" font-weight="bold" fill="#1976d2">ğŸ“¦ Node 2 - Kubelet</text>
  
  <!-- More scaling pods -->
  <g transform="translate(680, 545)">
    <text x="0" y="-8" font-family="system-ui, sans-serif" font-size="10" fill="#666">ğŸ†• æ‰¹é‡åˆ›å»ºä¸­ (Batch Creating)</text>
    
    <g transform="translate(0, 0)">
      <g class="batch-pod" opacity="0.6">
        <rect width="80" height="60" rx="5" fill="#fff3e0" stroke="#ff9800" stroke-width="2" stroke-dasharray="3"/>
        <text x="40" y="22" text-anchor="middle" font-family="system-ui, sans-serif" font-size="10" fill="#e65100">Pod 6-10</text>
        <text x="40" y="40" text-anchor="middle" font-family="system-ui, sans-serif" font-size="9" fill="#666">ç­‰å¾…è°ƒåº¦</text>
        <animate attributeName="opacity" values="0.4;0.8;0.4" dur="2s" repeatCount="indefinite"/>
      </g>
      
      <g class="batch-pod" transform="translate(95, 0)" opacity="0.6">
        <rect width="80" height="60" rx="5" fill="#fff3e0" stroke="#ff9800" stroke-width="2" stroke-dasharray="3"/>
        <text x="40" y="22" text-anchor="middle" font-family="system-ui, sans-serif" font-size="10" fill="#e65100">Pod 11-20</text>
        <text x="40" y="40" text-anchor="middle" font-family="system-ui, sans-serif" font-size="9" fill="#666">ç­‰å¾…è°ƒåº¦</text>
        <animate attributeName="opacity" values="0.4;0.8;0.4" dur="2s" begin="0.3s" repeatCount="indefinite"/>
      </g>
      
      <g class="batch-pod" transform="translate(190, 0)" opacity="0.6">
        <rect width="80" height="60" rx="5" fill="#fff3e0" stroke="#ff9800" stroke-width="2" stroke-dasharray="3"/>
        <text x="40" y="22" text-anchor="middle" font-family="system-ui, sans-serif" font-size="10" fill="#e65100">Pod 21-50</text>
        <text x="40" y="40" text-anchor="middle" font-family="system-ui, sans-serif" font-size="9" fill="#666">æ’é˜Ÿåˆ›å»º</text>
        <animate attributeName="opacity" values="0.4;0.8;0.4" dur="2s" begin="0.6s" repeatCount="indefinite"/>
      </g>
    </g>
  </g>
  
  <!-- Formula & Stats Panel -->
  <g transform="translate(60, 680)">
    <rect width="580" height="170" rx="8" fill="#fff" stroke="#ff9800" stroke-width="2"/>
    <text x="290" y="25" text-anchor="middle" font-family="system-ui, sans-serif" font-size="14" font-weight="bold" fill="#e65100">ğŸ§® KEDA æ‰©å®¹è®¡ç®—å…¬å¼</text>
    
    <rect x="15" y="40" width="550" height="50" rx="5" fill="#fff8e1"/>
    <text x="290" y="55" text-anchor="middle" font-family="monospace, sans-serif" font-size="12" fill="#333">
      desiredReplicas = ceil(é˜Ÿåˆ—é•¿åº¦ / pendingEntriesCount)
    </text>
    <text x="290" y="78" text-anchor="middle" font-family="monospace, sans-serif" font-size="13" fill="#e65100" font-weight="bold">
      = ceil(500 / 10) = <tspan fill="#f44336" font-size="16">50 ä¸ª Pod</tspan>
    </text>
    
    <g transform="translate(15, 100)">
      <rect width="170" height="55" rx="5" fill="#ffebee"/>
      <text x="85" y="18" text-anchor="middle" font-family="system-ui, sans-serif" font-size="10" fill="#666">å½“å‰é˜Ÿåˆ—ç§¯å‹</text>
      <text x="85" y="42" text-anchor="middle" font-family="system-ui, sans-serif" font-size="18" font-weight="bold" fill="#c62828">500 æ¡</text>
    </g>
    
    <g transform="translate(200, 100)">
      <rect width="170" height="55" rx="5" fill="#e3f2fd"/>
      <text x="85" y="18" text-anchor="middle" font-family="system-ui, sans-serif" font-size="10" fill="#666">æ¯ Pod å¤„ç†èƒ½åŠ›</text>
      <text x="85" y="42" text-anchor="middle" font-family="system-ui, sans-serif" font-size="18" font-weight="bold" fill="#1565c0">10 æ¡</text>
    </g>
    
    <g transform="translate(385, 100)">
      <rect width="180" height="55" rx="5" fill="#e8f5e9"/>
      <text x="90" y="18" text-anchor="middle" font-family="system-ui, sans-serif" font-size="10" fill="#666">æœŸæœ›å‰¯æœ¬æ•°</text>
      <text x="90" y="42" text-anchor="middle" font-family="system-ui, sans-serif" font-size="18" font-weight="bold" fill="#2e7d32">3 â†’ 50</text>
    </g>
  </g>
  
  <!-- Status Monitor Panel -->
  <g transform="translate(660, 680)">
    <rect width="580" height="170" rx="8" fill="#fff" stroke="#4caf50" stroke-width="2"/>
    <text x="290" y="25" text-anchor="middle" font-family="system-ui, sans-serif" font-size="14" font-weight="bold" fill="#2e7d32">ğŸ“Š å®æ—¶çŠ¶æ€ç›‘æ§</text>
    
    <g transform="translate(15, 45)">
      <rect width="130" height="50" rx="5" fill="#e8f5e9"/>
      <text x="65" y="18" text-anchor="middle" font-family="system-ui, sans-serif" font-size="9" fill="#666">å½“å‰å‰¯æœ¬æ•°</text>
      <text x="65" y="40" text-anchor="middle" font-family="system-ui, sans-serif" font-size="16" font-weight="bold" fill="#2e7d32">
        3 <tspan fill="#666" font-size="12">â†’</tspan> <tspan fill="#f44336">50</tspan>
      </text>
    </g>
    
    <g transform="translate(160, 45)">
      <rect width="130" height="50" rx="5" fill="#fff3e0"/>
      <text x="65" y="18" text-anchor="middle" font-family="system-ui, sans-serif" font-size="9" fill="#666">æ‰©å®¹çŠ¶æ€</text>
      <text x="65" y="40" text-anchor="middle" font-family="system-ui, sans-serif" font-size="13" font-weight="bold" fill="#ef6c00">
        ğŸ”¥ æ‰©å®¹ä¸­
        <animate attributeName="opacity" values="1;0.5;1" dur="0.8s" repeatCount="indefinite"/>
      </text>
    </g>
    
    <g transform="translate(305, 45)">
      <rect width="130" height="50" rx="5" fill="#fce4ec"/>
      <text x="65" y="18" text-anchor="middle" font-family="system-ui, sans-serif" font-size="9" fill="#666">å†·å´æœŸå‰©ä½™</text>
      <text x="65" y="40" text-anchor="middle" font-family="system-ui, sans-serif" font-size="13" font-weight="bold" fill="#c2185b">180s</text>
    </g>
    
    <g transform="translate(450, 45)">
      <rect width="115" height="50" rx="5" fill="#e1f5fe"/>
      <text x="57" y="18" text-anchor="middle" font-family="system-ui, sans-serif" font-size="9" fill="#666">ä¸‹æ¬¡æ£€æŸ¥</text>
      <text x="57" y="40" text-anchor="middle" font-family="system-ui, sans-serif" font-size="13" font-weight="bold" fill="#0277bd">15s</text>
    </g>
    
    <g transform="translate(15, 105)">
      <rect width="270" height="50" rx="5" fill="#f3e5f5"/>
      <text x="135" y="18" text-anchor="middle" font-family="system-ui, sans-serif" font-size="9" fill="#666">Scaler ç±»å‹</text>
      <text x="135" y="40" text-anchor="middle" font-family="system-ui, sans-serif" font-size="12" font-weight="bold" fill="#7b1fa2">redis-streams (60+ Scalers ä¹‹ä¸€)</text>
    </g>
    
    <g transform="translate(300, 105)">
      <rect width="265" height="50" rx="5" fill="#e0f2f1"/>
      <text x="132" y="18" text-anchor="middle" font-family="system-ui, sans-serif" font-size="9" fill="#666">é›¶å‰¯æœ¬æ”¯æŒ</text>
      <text x="132" y="40" text-anchor="middle" font-family="system-ui, sans-serif" font-size="12" font-weight="bold" fill="#00796b">minReplicaCount: 0 âœ“ Scale to Zero</text>
    </g>
  </g>
  
  <!-- Flow Arrows with Animation -->
  <!-- Event Source to Scaler -->
  <g>
    <path d="M 290 260 L 400 260 L 400 230 L 530 230" stroke="#ff9800" stroke-width="3" fill="none" marker-end="url(#arrow-orange)" stroke-dasharray="8,4">
      <animate attributeName="stroke-dashoffset" values="0;-12" dur="0.6s" repeatCount="indefinite"/>
    </path>
    <text x="380" y="250" font-family="system-ui, sans-serif" font-size="9" fill="#ef6c00">â‘  æŸ¥è¯¢é˜Ÿåˆ—æ·±åº¦</text>
  </g>
  
  <!-- ScaledObject to Operator -->
  <g>
    <path d="M 520 215 L 535 215" stroke="#f57f17" stroke-width="2" fill="none" marker-end="url(#arrow)"/>
    <text x="500" y="205" font-family="system-ui, sans-serif" font-size="8" fill="#666">è§„åˆ™å®šä¹‰</text>
  </g>
  
  <!-- Operator to Metrics Server -->
  <g>
    <path d="M 700 230 L 715 230" stroke="#2196f3" stroke-width="3" fill="none" marker-end="url(#arrow)" stroke-dasharray="6,3">
      <animate attributeName="stroke-dashoffset" values="0;-9" dur="0.8s" repeatCount="indefinite"/>
    </path>
    <text x="700" y="220" font-family="system-ui, sans-serif" font-size="9" fill="#1976d2">â‘¡ æ¨é€æŒ‡æ ‡</text>
  </g>
  
  <!-- Metrics Server to HPA -->
  <g>
    <path d="M 800 270 L 800 320 L 640 320" stroke="#7b1fa2" stroke-width="3" fill="none" marker-end="url(#arrow)" stroke-dasharray="8,4">
      <animate attributeName="stroke-dashoffset" values="0;-12" dur="0.7s" repeatCount="indefinite"/>
    </path>
    <text x="720" y="295" font-family="system-ui, sans-serif" font-size="9" fill="#7b1fa2">â‘¢ è·å– External Metric</text>
  </g>
  
  <!-- HPA to API Server -->
  <g>
    <path d="M 640 345 L 660 345" stroke="#388e3c" stroke-width="3" fill="none" marker-end="url(#arrow-green)"/>
    <text x="650" y="365" font-family="system-ui, sans-serif" font-size="8" fill="#2e7d32">â‘£ è®¡ç®—å‰¯æœ¬æ•°</text>
  </g>
  
  <!-- API Server to Pods -->
  <g>
    <path d="M 740 400 L 740 480 L 600 480 L 600 500" stroke="#4caf50" stroke-width="3" fill="none" marker-end="url(#arrow-green)" stroke-dasharray="10,5">
      <animate attributeName="stroke-dashoffset" values="0;-15" dur="1s" repeatCount="indefinite"/>
    </path>
    <text x="630" y="475" font-family="system-ui, sans-serif" font-size="9" fill="#388e3c">â‘¤ åˆ›å»º Pod</text>
  </g>
  
  <!-- API Server to Node 2 -->
  <g>
    <path d="M 820 400 L 900 400 L 900 500" stroke="#4caf50" stroke-width="3" fill="none" marker-end="url(#arrow-green)" stroke-dasharray="10,5">
      <animate attributeName="stroke-dashoffset" values="0;-15" dur="1.2s" repeatCount="indefinite"/>
    </path>
  </g>
  
  <!-- Redis direct to User request context -->
  <g>
    <path d="M 170 260 L 170 450" stroke="#f44336" stroke-width="2" fill="none" stroke-dasharray="5,3" opacity="0.4"/>
    <text x="180" y="360" font-family="system-ui, sans-serif" font-size="9" fill="#c62828" opacity="0.6">æ¨ç†è¯·æ±‚æµå…¥</text>
  </g>
  
  <!-- Workflow Legend -->
  <g transform="translate(30, 860)">
    <text x="0" y="0" font-family="system-ui, sans-serif" font-size="11" font-weight="bold" fill="#555">ğŸ’¡ å·¥ä½œæµç¨‹:</text>
    <text x="100" y="0" font-family="system-ui, sans-serif" font-size="10" fill="#666">â‘  Redis é˜Ÿåˆ—ç§¯å‹ 500 æ¡ â†’ â‘¡ KEDA Operator æ¯ 30s æŸ¥è¯¢ â†’ â‘¢ Metrics Server è½¬æ¢ä¸º External Metric</text>
    <text x="100" y="18" font-family="system-ui, sans-serif" font-size="10" fill="#666">â‘£ HPA æ¯ 15s æ‹‰å–æŒ‡æ ‡,è®¡ç®—æœŸæœ›å‰¯æœ¬æ•° = 50 â†’ â‘¤ API Server æ‰¹é‡åˆ›å»º 47 ä¸ªæ–° Pod</text>
  </g>
  
  <!-- Scale to zero indicator -->
  <g transform="translate(1100, 450)">
    <rect width="150" height="70" rx="8" fill="#e0f2f1" stroke="#00796b" stroke-width="2"/>
    <text x="75" y="22" text-anchor="middle" font-family="system-ui, sans-serif" font-size="11" font-weight="bold" fill="#00695c">ğŸ¯ KEDA ç‰¹è‰²</text>
    <text x="75" y="42" text-anchor="middle" font-family="system-ui, sans-serif" font-size="10" fill="#00796b">Scale to Zero</text>
    <text x="75" y="58" text-anchor="middle" font-family="system-ui, sans-serif" font-size="9" fill="#666">é—²æ—¶ 0 å‰¯æœ¬</text>
  </g>
  
  <!-- Scaler count badge -->
  <g transform="translate(1100, 530)">
    <rect width="150" height="70" rx="8" fill="#fff3e0" stroke="#ff9800" stroke-width="2"/>
    <text x="75" y="22" text-anchor="middle" font-family="system-ui, sans-serif" font-size="11" font-weight="bold" fill="#e65100">ğŸ“¦ Scaler ç”Ÿæ€</text>
    <text x="75" y="45" text-anchor="middle" font-family="system-ui, sans-serif" font-size="16" font-weight="bold" fill="#ef6c00">60+</text>
    <text x="75" y="60" text-anchor="middle" font-family="system-ui, sans-serif" font-size="9" fill="#666">å¼€ç®±å³ç”¨</text>
  </g>
  
  <!-- System status -->
  <g transform="translate(1100, 610)">
    <rect width="150" height="50" rx="8" fill="#e8f5e9" stroke="#4caf50" stroke-width="2"/>
    <text x="75" y="20" text-anchor="middle" font-family="system-ui, sans-serif" font-size="11" font-weight="bold" fill="#2e7d32">ğŸŸ¢ ç³»ç»ŸçŠ¶æ€</text>
    <text x="75" y="38" text-anchor="middle" font-family="system-ui, sans-serif" font-size="10" fill="#388e3c">æ­£å¸¸è¿è¡Œ</text>
  </g>
</svg>